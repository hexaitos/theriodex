<% if form == nil %>
	<a class="corner" href="/show/<%= id %>">Direct link</a>
<% else %>
	<a class="corner" href="/show/<%= id %>?form=<%= form %>">Direct link</a>
<% end %>

<div class="types">
	<h1><%= name %></h1>
	<% types.each do |type| %>
		<img src="/sprites/types/generation-vii/ultra-sun-ultra-moon/<%= type.first.to_s %>.png"/>
	<% end %>
	<span><%= weight / 10 %> kg • <%= height / 10 %> m • <%= species_name %></span>
	<span>
		Evolutions:
		<% if evolutions.size == 1 or evolutions.nil? or evolutions.size == 0 then %>
			none
		<% else %>
			<% evolutions.each do | evolution | %>
				<% if evolutions_formatted[evolution] == name then %>
						<a class="current" href="/show/<%= evolution %>"><%= evolutions_formatted[evolution] %></a>
					<% else %>
						<a href="/show/<%= evolution %>"><%= evolutions_formatted[evolution] %></a>
					<% end %>
			<% end %>
		<% end %>
	</span>
</div>

<div class="sprites">
	<% case sex 
	when "", nil %>
		<% if form == "shiny" and !front_shiny.nil? %>
			<img src="<%= front_shiny %>"/>

			<% unless back_shiny.nil? %>
				<img src="<%= back_shiny %>"/>
			<% end %>

			<br />
			<a href="/show/<%= id %>">Show normal</a>

			<% unless front_shiny_female.nil? %>
				<a href="/show/<%= id %>?s=female&form=shiny">Show female</a>
			<% end %>
		<% elsif form == "" or form == "normal" or form.nil? %>
			<img src="<%= sprite %>"/>

			<% unless sprite_back.nil? %>
				<img src="<%= sprite_back %>"/>
			<% end %>

			<br />
			<a href="/show/<%= id %>?form=shiny">Show shiny</a>

			<% unless front_shiny_female.nil? %>
				<a href="/show/<%= id %>?s=female">Show female</a>
			<% end %>
		<% end %>
	<% when "female" %>
		<% if form == "shiny" and !front_shiny_female.nil? %>
			<img src="<%= front_shiny_female %>"/>

			<% unless back_shiny_female.nil? %>
				<img src="<%= back_shiny_female %>"/>
			<% end %>

			<br />
			<a href="/show/<%= id %>?s=female">Show normal</a>
			<a href="/show/<%= id %>?form=shiny">Show male</a>
		<% elsif form == "" or form == "normal" or form.nil? %>
			<img src="<%= front_female %>"/>

			<% unless back_female.nil? %>
				<img src="<%= back_female %>"/>
			<% end %>

			<br />
			<a href="/show/<%= id %>?form=shiny&s=female">Show shiny</a>
			<a href="/show/<%= id %>">Show male</a>
		<% end %>
	<% end %>

</div>

<div class="info">	
	<div class="flavour">
		<p><%= flavour_text %></p>
	</div>

	<div class="damage">
		<h3>Damage taken from other types</h3>
		<span>(horizontally scrollable on small screens)</span>
		<div class="damage_taken">
			<table>
			<thead>
			<tr>
			<% 18.times do |num| %>
				<th><img src="/sprites/types/generation-vii/ultra-sun-ultra-moon/<%= num  + 1 %>.png"/></th>
			<% end %>
			</tr></thead>
			<tbody>
			<tr>
				<% damage_taken.each do |type| %>
					<% if type[1].to_f / 100 == 0.5 then %>
						<% converted_type = "½" %>
					<% elsif type[1].to_f / 100 == 0.25 then %>
						<% converted_type = "¼" %>
					<% else %>
						<% converted_type = type[1].to_f / 100 %>
						<% converted_type = converted_type.to_s.gsub(/(\.)0+$/, '') %>
					<% end %>

					<td><%= converted_type %>x</td>
				<% end %>
			</tr>
			</tbody>
			</table>
		</div>
	</div>
</div>
<br/>
