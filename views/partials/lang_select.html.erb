<div class="corner">
	<% if request.fullpath.gsub(request.query_string, "").gsub("?", "") != "/" %>
		<a class="corner" href="<%= request.fullpath %>"><%= I18n.t(:direct_link) %></a>
		<form action="<%= request.fullpath %>" method="get" id="language_select">
	<% else %>
		<a class="corner" href="/show/<%= id %>?lang=<%= lang %>"><%= I18n.t(:direct_link) %></a>
		<form action="/show/<%= id %>" method="get" id="language_select">
	<% end %>
		<select aria-label="Select language" id="lang-select" name="lang" required>
			<option value="en">ğŸŒ English</option>
			<option value="de">ğŸŒ Deutsch</option>
			<option value="fr">ğŸŒ FranÃ§ais</option>
			<option value="it">ğŸŒ Italiano</option>
			<option value="es">ğŸŒ EspaÃ±ol</option>
			<option value="ko">ğŸŒ í•œêµ­ì–´</option>
			<option value="ja">ğŸŒ æ—¥æœ¬èª</option>
			<option value="zh-cn">ğŸŒ ä¸­æ–‡ï¼ˆç®€ä½“)</option>
			<option value="zh-tw">ğŸŒ ä¸­æ–‡ï¼ˆç¹é«”)</option>
		</select>
	</form>
</div>

<script>
document.querySelector('#language_select').addEventListener("change", (event) => {
	document.querySelector('#language_select').submit();
});

window.onload = () => {
	const urlParams = new URLSearchParams(window.location.search);
	const lang = urlParams.get('lang') || 'en';
	document.querySelector('#lang-select').value = lang;
};
</script>
